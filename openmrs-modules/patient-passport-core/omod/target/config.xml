<?xml version="1.0" encoding="UTF-8"?>
<module id="patientpassportcore" version="1.0.0" package="org.openmrs.module.patientpassportcore" xmlns="http://openmrs.org">

    <name>Patient Passport Core</name>
    <description>Core functionality for Patient Passport integration with OpenMRS</description>
    <author>Patient Passport Team</author>
    <version>1.0.0</version>
    <updateURL>http://openmrs.org/modules/download/patientpassportcore/update.rdf</updateURL>
    <require_version>2.0.0</require_version>

    <!-- Dependencies -->
    <require_modules>
        <require_module version="1.0.0">webservices.rest</require_module>
        <require_module version="1.0.0">fhir2</require_module>
    </require_modules>

    <!-- Activator -->
    <activator>org.openmrs.module.patientpassportcore.PatientPassportCoreModuleActivator</activator>

    <!-- Extension Points -->
    <extensionPoints>
        <extensionPoint id="patientpassport.core.service" 
                        description="Core service for Patient Passport functionality" 
                        type="org.openmrs.module.patientpassportcore.api.PatientPassportCoreService"/>
    </extensionPoints>

    <!-- Extensions -->
    <extensions>
        <!-- REST API Extension -->
        <extension pointId="org.openmrs.module.webservices.rest.web" type="rest">
            <name>Patient Passport REST API</name>
            <description>REST API endpoints for Patient Passport functionality</description>
            <class>org.openmrs.module.patientpassportcore.web.controller.PatientPassportRestController</class>
        </extension>

        <!-- FHIR Integration Extension -->
        <extension pointId="org.openmrs.module.fhir2" type="fhir-resource">
            <name>Patient Passport FHIR Resource</name>
            <description>FHIR resource for Patient Passport data</description>
            <class>org.openmrs.module.patientpassportcore.fhir.PatientPassportResourceProvider</class>
        </extension>

        <!-- Admin Page Extension -->
        <extension pointId="org.openmrs.module.legacyui.admin" type="link">
            <name>Patient Passport Admin</name>
            <description>Administration page for Patient Passport</description>
            <url>patientpassport/admin.page</url>
            <label>Patient Passport</label>
            <icon>icon-user-md</icon>
        </extension>

        <!-- Patient Dashboard Extension -->
        <extension pointId="org.openmrs.module.legacyui.patientDashboard" type="link">
            <name>Patient Passport Dashboard</name>
            <description>Patient Passport section on patient dashboard</description>
            <url>patientpassport/patientDashboard.page</url>
            <label>Patient Passport</label>
            <icon>icon-passport</icon>
            <order>100</order>
        </extension>
    </extensions>

    <!-- Global Properties -->
    <globalProperties>
        <globalProperty>
            <property>patientpassportcore.api.url</property>
            <defaultValue>http://localhost:3000/api</defaultValue>
            <description>Patient Passport API base URL</description>
        </globalProperty>
        <globalProperty>
            <property>patientpassportcore.api.key</property>
            <defaultValue></defaultValue>
            <description>API key for Patient Passport service</description>
        </globalProperty>
        <globalProperty>
            <property>patientpassportcore.enable.sync</property>
            <defaultValue>true</defaultValue>
            <description>Enable automatic sync with Patient Passport</description>
        </globalProperty>
        <globalProperty>
            <property>patientpassportcore.universal.id.type</property>
            <defaultValue>UNIVERSAL_PATIENT_ID</defaultValue>
            <description>Patient identifier type for universal IDs</description>
        </globalProperty>
    </globalProperties>

    <!-- Privileges -->
    <privileges>
        <privilege>
            <name>Manage Patient Passport</name>
            <description>Allows management of Patient Passport functionality</description>
        </privilege>
        <privilege>
            <name>View Patient Passport</name>
            <description>Allows viewing Patient Passport data</description>
        </privilege>
        <privilege>
            <name>Emergency Override Patient Passport</name>
            <description>Allows emergency override of Patient Passport restrictions</description>
        </privilege>
    </privileges>

    <!-- Database Updates -->
    <updateFile>sql/updates.xml</updateFile>

</module>



























